(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{528:function(e,t,n){"use strict";(function(e){var r=n(71),o=n(24),l=n(28),c=(n(327),n(30),n(36),n(3),n(199),n(26),n(242),n(81),n(201)),d=n(127),m=n(551);e.env.DEV_API,e.env.PROD_API;t.a={mixins:[c.validationMixin,m.a],head:function(){return{title:"Systeme Users Datatable"}},data:function(){return{form_tags:[],items:[],headers:[{text:"No",align:"start",sortable:!1,value:"no"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Change",value:"created_at"},{text:"Date/Time",value:"updated_at"},{text:"Action",value:"id",sortable:!1}],form_id:"",form_name:"",form_role:"Admin",form_roleId:1,dialog:!1,dialogDelete:!1,deletedialog:!1,editedIndex:-1,search:"",tabledata:[],tabledata_total:0,loading:!0,options:{}}},validations:{form_id:{required:d.required},form_name:{required:d.required},form_role:{required:d.required}},created:function(){return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:{titleErrors:function(){var e=[];return this.$v.form_title.$dirty?(!this.$v.form_title.required&&e.push("Title is required."),e):e},contentErrors:function(){var e=[];return this.$v.form_content.$dirty?(!this.$v.form_content.required&&e.push("Content is required."),e):e}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0},dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},fetch:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,l,c,d,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie");case 2:return t.next=4,e.$axios.$get("api/role/data");case 4:for(n=t.sent,console.log(n),l=0,c=Object.entries(n.data);l<c.length;l++)d=Object(o.a)(c[l],2),d[0],m=d[1],e.items=[].concat(Object(r.a)(e.items),[m.name]);case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){this.getDataFromApi()},methods:{SaveEdited:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie").then((function(e){}));case 2:n=new FormData,r=e.tabledata[e.editedIndex].id,n.append("post_id",e.tabledata[e.editedIndex].id),n.append("title",e.form_title),n.append("headline",e.form_headline),n.append("content",e.form_content),n.append("publish",e.form_publish),n.append("image",e.form_image);try{e.$axios.$post("api/blog/update/".concat(r),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.tabledata[e.editedIndex].tags=e.form_tags,e.tabledata[e.editedIndex].title=e.form_title,e.tabledata[e.editedIndex].content=e.form_content,e.tabledata[e.editedIndex].headline=e.form_headline,e.dialog=!1,e.form_publish="",e.image_preview="",e.$fetch(),NProgress.done()})).catch((function(t){e.form_publish="",NProgress.done()})).finally((function(){}))}catch(e){}case 11:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.form_id=this.tabledata[this.tabledata.indexOf(e)].id,this.form_name=this.tabledata[this.tabledata.indexOf(e)].name,this.form_role_id=this.tabledata[this.tabledata.indexOf(e)].role_id,this.form_role_name=this.tabledata[this.tabledata.indexOf(e)].role_name,this.editedIndex=this.tabledata.indexOf(e),this.dialog=!0},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},deleteItem:function(e){this.editedIndex=this.tabledata.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie").then((function(e){}));case 2:n=e.tabledata[e.editedIndex].id,console.log(n);try{e.$axios.$delete("api/user/delete/".concat(n)).then((function(e){})).catch((function(e){})).finally((function(){}))}catch(e){}e.tabledata.splice(e.editedIndex,1),e.closeDelete();case 7:case"end":return t.stop()}}),t)})))()},getDataFromApi:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r,l,c,d,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.options,r=n.sortBy,l=n.sortDesc,c=n.page,d=n.itemsPerPage,(m=new FormData).append("sortDesc",l),m.append("sortBy",r),m.append("page",c),m.append("itemsPerPage",d),m.append("search",e.search),t.next=10,e.$axios.$get("/sanctum/csrf-cookie").then((function(e){}));case 10:e.$axios.$post("api/user/datatable",m).then((function(t){var data=[],n=1;n=1==c?1:(c-1)*d+1;for(var r=0,l=Object.entries(t.data);r<l.length;r++){var m=Object(o.a)(l[r],2),f=(m[0],m[1]);data.push({id:f.id,no:n,name:f.name,email:f.email,role_name:f.role_name,role_id:f.role_id,created_at:f.created,updated_at:f.updated}),n++}e.tabledata=data,e.tabledata_total=t.total,e.loading=!1})).catch((function(t){e.loading=!1})).finally((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t)})))()}}}}).call(this,n(200))},536:function(e,t,n){var content=n(553);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("0fe8886e",content,!0,{sourceMap:!1})},551:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={middleware:"admin",layout:"admin"}},552:function(e,t,n){"use strict";n(536)},553:function(e,t,n){var r=n(17)(!1);r.push([e.i,"ul.clean[data-v-2574eebf]{list-style:none!important;list-style-type:none!important}.ck-editor__editable[data-v-2574eebf],.ck.ck-content.ck-editor__editable[data-v-2574eebf],.ck.ck-content.ck-editor__editable.ck-rounded-corners.ck-editor__editable_inline[data-v-2574eebf],.ck.ck-content.ck-editor__editable_inline[data-v-2574eebf]{height:350px}",""]),e.exports=r},619:function(e,t,n){"use strict";n.r(t);var r=n(528).a,o=(n(552),n(61)),l=n(68),c=n.n(l),d=n(233),m=n(243),f=n(234),v=n(151),_=n(537),h=n(516),x=n(627),k=n(521),y=n(610),$=n(517),I=n(230),w=n(518),C=n(59),D=n(515),O=n(499),V=n(60),j=n(244),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey ligthen-3 pa-0 ma-0",attrs:{fluid:"","min-height":""}},[n("v-sheet",{staticClass:"blue ligthen-3 pa-5 pt-10 pb-10",attrs:{"min-height":""}},[n("v-card",[n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{attrs:{tile:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary","max-height":"50vh"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-toolbar-title",[e._v("Settings")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:e.SaveEdited}},[e._v(" Save ")])],1)],1),e._v(" "),n("v-card-text",[n("v-row",[n("v-col",[n("v-text-field",{staticClass:"pt-5",attrs:{label:"Name"},on:{blur:function(t){return e.$v.form_name.$touch()},input:function(t){return e.$v.form_name.$touch()}},model:{value:e.form_name,callback:function(t){e.form_name=t},expression:"form_name"}}),e._v(" "),e.$v.form_name.$error?[e.$v.form_name.required?e._e():n("div",{staticClass:"errorMessage red--text"},[e._v("\n                    Name is required.\n                  ")])]:e._e()],2)],1),e._v(" "),n("v-row"),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-combobox",{attrs:{items:e.items,label:"Role",chips:""},scopedSlots:e._u([{key:"selection",fn:function(data){return[n("v-chip",e._b({key:JSON.stringify(data.item),attrs:{"input-value":data.selected,disabled:data.disabled},on:{"click:close":function(e){return data.parent.selectItem(data.item)}}},"v-chip",data.attrs,!1),[n("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:e._s(data.item.slice(0,1).toUpperCase())}}),e._v("\n                      "+e._s(data.item)+"\n                    ")],1)]}}]),model:{value:e.form_role_name,callback:function(t){e.form_role_name=t},expression:"form_role_name"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{},[n("label",{staticClass:"black--text",attrs:{for:""}},[e._v("Role")]),e._v(" "),n("br")])],1)],1),e._v(" "),n("div",{staticStyle:{flex:"1 1 auto"}})],1)],1),e._v(" "),n("v-card-title",[e._v("\n        System Users Table\n\n        "),n("v-spacer"),e._v(" "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{change:e.getDataFromApi},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-spacer")],1),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tabledata,options:e.options,"server-items-length":e.tabledata_total,loading:e.loading,"footer-props":{"items-per-page-options":[5,10,20,30,40,50]}},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return t.preventDefault(),e.closeDelete()}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return t.preventDefault(),e.deleteItemConfirm()}}},[e._v("OK")]),e._v(" "),n("v-spacer")],1)],1)],1)]},proxy:!0},{key:"header.id",fn:function(t){var header=t.header;return[e._v("\n          "+e._s(header.text.toUpperCase())+"\n        ")]}},{key:"header.name",fn:function(t){var header=t.header;return[e._v("\n          "+e._s(header.text.toUpperCase())+"\n        ")]}},{key:"item.publish",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.publish)+"\n        ")]}},{key:"item.created_at",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.created_at)+"\n        ")]}},{key:"item.id",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(r)}}},[e._v("\n            mdi-pencil\n          ")]),e._v(" "),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(r)}}},[e._v(" mdi-delete ")])]}}])})],1)],1)],1)}),[],!1,null,"2574eebf",null);t.default=component.exports;c()(component,{VAvatar:d.a,VBtn:m.a,VCard:f.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VChip:_.a,VCol:h.a,VCombobox:x.a,VContainer:k.a,VDataTable:y.a,VDialog:$.a,VIcon:I.a,VRow:w.a,VSheet:C.a,VSpacer:D.a,VTextField:O.a,VToolbar:V.a,VToolbarItems:j.a,VToolbarTitle:j.b})}}]);